<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    {% load static %}
    <link href="{% static 'css/tailwind.css' %}" rel="stylesheet" />
    {% load static %}
    <link rel="icon" type="image/png" href="{% static 'images/baykar_favicon.png' %}" />
    <title>Login Page</title>
  </head>
  <body class="bg-blue-900 flex items-center justify-center min-h-screen">
    <div class="w-full max-w-md p-10" style="background-color: #121d54; border-radius: 1rem; box-shadow: 0 0 15px rgba(0, 0, 0, 0.5);">
      <h2 class="text-4xl font-bold text-center text-white mb-6">Hava Aracı Üretim Uygulaması</h2>
      <h3 class="text-2xl font-semibold text-center text-white mb-6">Personel Girişi</h3>
      <form id="loginForm" class="space-y-6">
        <div>
          <label for="username" class="block text-lg font-medium text-white">Kullanıcı Adı</label>
          <input type="text" id="username" name="username" class="mt-2 w-full px-4 py-3 border border-gray-400 rounded-lg shadow focus:outline-none focus:ring-2 focus:ring-indigo-400 focus:border-transparent" required />
        </div>
        <div>
          <label for="password" class="block text-lg font-medium text-white">Parola</label>
          <input type="password" id="password" name="password" class="mt-2 w-full px-4 py-3 border border-gray-400 rounded-lg shadow focus:outline-none focus:ring-2 focus:ring-indigo-400 focus:border-transparent" required />
        </div>
        <button type="button" id="loginButton" class="w-full" style="background-color: #4055bd; color: white; padding: 0.75rem; border-radius: 0.5rem; font-weight: 600; transition: background-color 0.2s;" onmouseover="this.style.backgroundColor='#3249a5';" onmouseout="this.style.backgroundColor='#4055bd';">Giriş Yap</button>
      </form>
      <div id="loginError" class="mt-6 text-red-400 text-center hidden">Geçersiz kullanıcı adı veya parola.</div>
    </div>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
      $(document).ready(function () {
        $('#loginButton').click(function () {
          const username = $('#username').val()
          const password = $('#password').val()
      
          $.ajax({
            url: '/api/login', // Backend API endpoint
            type: 'POST',
            contentType: 'application/json',
            data: JSON.stringify({ username: username, password: password }),
            success: function (response) {
              if (response.success) {
                window.location.href = '/dashboard/'
              } else {
                $('#loginError').removeClass('hidden')
              }
            },
            error: function () {
              $('#loginError').removeClass('hidden')
            }
          })
        })
      })
    </script>
  </body>
</html>
